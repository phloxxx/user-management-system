import{a as te,b as R,c as oe,d as ie,f as ne}from"./chunk-6FRQHW3F.js";import{A as b,Ba as Y,Ca as Z,D as k,Da as K,E as y,Ea as X,F as p,Fa as w,Ga as q,H as s,Ha as d,Ia as v,J as O,Ja as M,Ka as ee,P as F,Q as j,W as $,Y as P,Z as B,_ as I,ba as U,ca as V,da as f,ea as z,fa as G,ga as J,k as L,l as N,m as A,o as m,p as _,q as x,r as S,s as D,t as a,u as l,v as u,w as c,x as H,y as r,ya as W,z as n,za as Q}from"./chunk-7XTECHTP.js";var se=(()=>{class e{constructor(t){this.accountService=t,this.account=this.accountService.accountValue}static{this.\u0275fac=function(o){return new(o||e)(l(d))}}static{this.\u0275cmp=m({type:e,selectors:[["ng-component"]],decls:6,vars:1,consts:[[1,"p-4"],[1,"container"]],template:function(o,i){o&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),s(3),n(),r(4,"p"),s(5,"You're logged in with Angular 10 & JWT!!"),n()()()),o&2&&(a(3),O("Hi ",i.account.firstName,"!"))},encapsulation:2})}}return e})();var ue=()=>import("./chunk-ZJF22HCE.js").then(e=>e.AccountModule),de=()=>import("./chunk-YO3YCZ4V.js").then(e=>e.AdminModule),fe=()=>import("./chunk-Q2TKCOED.js").then(e=>e.ProfileModule),ve=[{path:"",component:se,canActivate:[R]},{path:"account",loadChildren:ue},{path:"profile",loadChildren:fe,canActivate:[R]},{path:"admin",loadChildren:de,canActivate:[R],data:{roles:[M.Admin]}},{path:"**",redirectTo:""}],ae=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=_({type:e})}static{this.\u0275inj=A({imports:[w.forRoot(ve),w]})}}return e})();var ce=(()=>{class e{intercept(t,o){if(console.log("-------------------------"),console.log("DEBUG REQUEST:"),console.log(`URL: ${t.url}`),console.log(`Method: ${t.method}`),t.headers.has("Authorization")){let i=t.headers.get("Authorization");if(console.log(`Auth Header: ${i.substring(0,15)}...`),i&&i.startsWith("Bearer ")){let E=i.substring(7);try{let C=E.split(".");if(C.length===3){let T=JSON.parse(atob(C[1]));console.log("Token payload:",T),console.log("Token expiration:",new Date(T.exp*1e3).toISOString()),console.log("Current time:",new Date().toISOString()),console.log("Token expired:",new Date(T.exp*1e3)<new Date)}}catch(C){console.log("Could not decode token",C)}}}else console.log("No Authorization header present");return console.log("Body:",t.body),console.log("-------------------------"),o.handle(t).pipe(L({next:i=>{i instanceof U&&(console.log("-------------------------"),console.log("DEBUG RESPONSE:"),console.log(`URL: ${t.url}`),console.log(`Status: ${i.status}`),console.log("Body:",i.body),console.log("-------------------------"))},error:i=>{i instanceof V&&(console.log("-------------------------"),console.log("DEBUG ERROR RESPONSE:"),console.log(`URL: ${t.url}`),console.log(`Status: ${i.status}`),console.log(`Error message: ${i.message}`),console.log("Error details:",i.error),console.log("-------------------------"))}}))}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=N({token:e,factory:e.\u0275fac})}}return e})();function Ce(e,h){if(e&1){let t=k();r(0,"div")(1,"a",4),y("click",function(){let i=x(t).$implicit,E=p(2);return S(E.removeAlert(i))}),s(2,"\xD7"),n(),b(3,"span",5),n()}if(e&2){let t=h.$implicit,o=p(2);H(o.cssClasses(t)),a(3),c("innerHTML",t.message,D)}}function Ae(e,h){if(e&1&&(r(0,"div",1)(1,"div",2),u(2,Ce,4,4,"div",3),n()()),e&2){let t=p();a(2),c("ngForOf",t.alerts)}}var le=(()=>{class e{constructor(t,o){this.router=t,this.alertService=o,this.id="default-alert",this.fade=!0,this.alerts=[]}ngOnInit(){this.alertSubscription=this.alertService.onAlert(this.id).subscribe(t=>{if(!t.message){this.alerts=this.alerts.filter(o=>o.keepAfterRouteChange),this.alerts.forEach(o=>delete o.keepAfterRouteChange);return}this.alerts.push(t),t.autoClose&&setTimeout(()=>this.removeAlert(t),3e3)}),this.routeSubscription=this.router.events.subscribe(t=>{t instanceof Q&&this.alertService.clear(this.id)})}ngOnDestroy(){this.alertSubscription.unsubscribe(),this.routeSubscription.unsubscribe()}removeAlert(t){this.alerts.includes(t)&&(this.fade?(t.fade=!0,setTimeout(()=>{this.alerts=this.alerts.filter(o=>o!==t)},250)):this.alerts=this.alerts.filter(o=>o!==t))}cssClasses(t){if(!t)return;let o=["alert","alert-dismissible"],i={[v.Success]:"alert alert-success",[v.Error]:"alert alert-danger",[v.Info]:"alert alert-info",[v.Warning]:"alert alert-warning"};return o.push(i[t.type]),t.fade&&o.push("fade"),o.join(" ")}static{this.\u0275fac=function(o){return new(o||e)(l(Z),l(ee))}}static{this.\u0275cmp=m({type:e,selectors:[["alert"]],inputs:{id:"id",fade:"fade"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"m-3"],[3,"class",4,"ngFor","ngForOf"],[1,"close",3,"click"],[3,"innerHTML"]],template:function(o,i){o&1&&u(0,Ae,3,1,"div",0),o&2&&c("ngIf",i.alerts.length)},dependencies:[B,I],encapsulation:2})}}return e})();var xe=e=>({"bg-light":e}),Se=()=>({exact:!0});function be(e,h){e&1&&(r(0,"a",8),s(1,"Admin"),n())}function ke(e,h){if(e&1){let t=k();r(0,"nav",2)(1,"div",3)(2,"a",4),s(3,"Home"),n(),r(4,"a",5),s(5,"Profile"),n(),u(6,be,2,0,"a",6),r(7,"a",7),y("click",function(){x(t);let i=p();return S(i.logout())}),s(8,"Logout"),n()()()}if(e&2){let t=p();a(2),c("routerLinkActiveOptions",F(2,Se)),a(4),c("ngIf",t.account.role===t.Role.Admin)}}var pe=(()=>{class e{constructor(t){this.accountService=t,this.Role=M,this.accountService.account.subscribe(o=>this.account=o)}logout(){this.accountService.logout()}static{this.\u0275fac=function(o){return new(o||e)(l(d))}}static{this.\u0275cmp=m({type:e,selectors:[["app"]],decls:4,vars:4,consts:[[1,"app-container",3,"ngClass"],["class","navbar navbar-expand navbar-dark bg-dark",4,"ngIf"],[1,"navbar","navbar-expand","navbar-dark","bg-dark"],[1,"navbar-nav"],["routerLink","/","routerLinkActive","active",1,"nav-item","nav-link",3,"routerLinkActiveOptions"],["routerLink","/profile","routerLinkActive","active",1,"nav-item","nav-link"],["routerLink","/admin","routerLinkActive","active","class","nav-item nav-link",4,"ngIf"],[1,"nav-item","nav-link",3,"click"],["routerLink","/admin","routerLinkActive","active",1,"nav-item","nav-link"]],template:function(o,i){o&1&&(r(0,"div",0),u(1,ke,9,3,"nav",1),b(2,"alert")(3,"router-outlet"),n()),o&2&&(c("ngClass",j(2,xe,i.account)),a(),c("ngIf",i.account))},dependencies:[P,I,Y,K,X,le],encapsulation:2})}}return e})();var me=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=_({type:e,bootstrap:[pe]})}static{this.\u0275inj=A({providers:[{provide:$,useFactory:te,multi:!0,deps:[d]},{provide:f,useClass:ce,multi:!0},{provide:f,useClass:ie,multi:!0},{provide:f,useClass:oe,multi:!0},{provide:f,useClass:ne,multi:!0}],imports:[J,W,z,ae]})}}return e})();q.production&&void 0;G().bootstrapModule(me).catch(e=>console.error(e));
