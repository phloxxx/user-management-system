import{$ as ae,A as C,Aa as K,B as ie,C as ne,Ca as N,D as b,Da as ce,E as h,F as c,Fa as O,H as l,Ha as Q,I as v,J as q,Ja as ue,K as B,Ka as P,La as V,M as E,Ma as fe,N as S,Na as x,O as I,Q as D,R as re,U as oe,V as le,X as se,Y as $,Z as k,_ as T,a as ee,aa as de,b as te,c as L,e as W,g as j,i as g,ia as me,ka as H,m as U,ma as J,o as A,p as R,q as y,r as _,ra as z,sa as Y,t as s,ta as G,u,v as f,w as m,xa as pe,y as n,z as r}from"./chunk-7XTECHTP.js";var F=i=>({"is-invalid":i});function Ce(i,p){if(i&1){let e=b();n(0,"div",23)(1,"strong"),l(2,"Error:"),r(),l(3),n(4,"button",24),h("click",function(){y(e);let t=c();return _(t.clearError())}),r()()}if(i&2){let e=c();s(3),q(" ",e.errorMessage," ")}}function xe(i,p){if(i&1){let e=b();n(0,"div",25),l(1),n(2,"button",26),h("click",function(){y(e);let t=c();return _(t.clearSuccess())}),r()()}if(i&2){let e=c();s(),q(" ",e.successMessage," ")}}function we(i,p){i&1&&(n(0,"small",16),l(1," Automatically generated. Admin users can modify if needed. "),r())}function Me(i,p){i&1&&(n(0,"div",27),l(1,"Employee ID is required"),r())}function De(i,p){i&1&&(ie(0),l(1," [INACTIVE]"),ne())}function Ae(i,p){if(i&1&&(n(0,"option",28),l(1),f(2,De,2,0,"ng-container",29),r()),i&2){let e=p.$implicit;m("value",e.id),s(),B(" ",e.email," (",e.role,") "),s(),m("ngIf",e.isActive===!1)}}function ke(i,p){i&1&&(n(0,"div",27),l(1,"Account is required"),r())}function Te(i,p){i&1&&(n(0,"div",27),l(1,"Position is required"),r())}function Ne(i,p){if(i&1&&(n(0,"option",28),l(1),r()),i&2){let e=p.$implicit;m("value",e.id),s(),v(e.name)}}function Pe(i,p){i&1&&(n(0,"div",27),l(1,"Department is required"),r())}function Ve(i,p){i&1&&(n(0,"div",27),l(1,"Hire date is required"),r())}function Fe(i,p){i&1&&(n(0,"div",27),l(1,"Status is required"),r())}var Z=(()=>{class i{constructor(e,o,t,a,d,w,M){this.router=e,this.route=o,this.employeeService=t,this.departmentService=a,this.accountService=d,this.alertService=w,this.location=M,this.isEditMode=!1,this.employee={employeeId:"",userId:null,position:"",departmentId:null,hireDate:"",status:"Active"},this.errorMessage="",this.successMessage="",this.users=[],this.departments=[],this.allEmployees=[],this.availableUsers=[],this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isEditMode=!!this.id,this.departmentService.getAll().pipe(g()).subscribe({next:e=>this.departments=e,error:e=>this.alertService.error("Error loading departments: "+e)}),this.accountService.getAll().pipe(g()).subscribe({next:e=>{this.users=e,this.loadEmployeesForFiltering()},error:e=>this.alertService.error("Error loading users: "+e)}),this.isEditMode?this.employeeService.getById(this.id).pipe(g()).subscribe({next:e=>this.employee=e,error:e=>{this.alertService.error("Error loading employee: "+e),this.errorMessage="Could not load employee data"}}):this.employeeService.getAll().pipe(g()).subscribe({next:e=>{this.allEmployees=e,this.generateEmployeeId()}})}save(){if(this.submitted=!0,this.clearMessages(),this.isFormInvalid()){this.errorMessage="Please complete all required fields before saving.";return}try{this.id?this.employeeService.update(this.id,this.employee).pipe(g()).subscribe({next:()=>{this.successMessage="Employee updated successfully",setTimeout(()=>this.router.navigate(["../"],{relativeTo:this.route}),1500)},error:e=>{this.errorMessage=e}}):this.employeeService.create(this.employee).pipe(g()).subscribe({next:e=>{this.successMessage="Employee added successfully. An onboarding workflow has been created.",setTimeout(()=>this.router.navigate(["../"],{relativeTo:this.route}),1500)},error:e=>{this.errorMessage=e}})}catch(e){this.errorMessage="An unexpected error occurred. Please try again.",console.error(e)}}cancel(){this.submitted=!1,this.clearMessages(),this.location.back()}isAdmin(){return this.accountService.accountValue?.role===ue.Admin}generateEmployeeId(){if(this.allEmployees.length===0){this.employee.employeeId="EMP001";return}let e=0,o="EMP";this.allEmployees.forEach(d=>{if(d.employeeId&&d.employeeId.startsWith(o)){let w=d.employeeId.substring(o.length),M=parseInt(w,10);!isNaN(M)&&M>e&&(e=M)}});let a=(e+1).toString().padStart(3,"0");this.employee.employeeId=`${o}${a}`}loadEmployeesForFiltering(){this.employeeService.getAll().pipe(g()).subscribe({next:e=>{this.allEmployees=e,this.filterAvailableUsers()},error:e=>this.alertService.error("Error loading employees: "+e)})}filterAvailableUsers(){let e=this.allEmployees.filter(o=>o.id!==parseInt(this.id||"0")).map(o=>o.userId);if(this.availableUsers=this.users.filter(o=>{let t=o.isActive!==!1,a=!e.includes(o.id),d=this.employee.userId===o.id;return t&&(a||d)}),console.log("Available users for selection:",this.availableUsers),this.isEditMode&&this.employee.userId){let o=this.users.find(t=>t.id===this.employee.userId);o&&!this.availableUsers.some(t=>t.id===o.id)&&this.availableUsers.push(o)}}isFormInvalid(){return!this.employee.employeeId||!this.employee.userId||!this.employee.position||!this.employee.departmentId||!this.employee.hireDate||!this.employee.status}clearError(){this.errorMessage=""}clearSuccess(){this.successMessage=""}clearMessages(){this.errorMessage="",this.successMessage=""}static{this.\u0275fac=function(o){return new(o||i)(u(N),u(K),u(x),u(V),u(Q),u(P),u(se))}}static{this.\u0275cmp=A({type:i,selectors:[["app-add-edit"]],decls:70,vars:41,consts:[[1,"card"],[1,"card-header","bg-light"],[1,"mb-0"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success alert-dismissible fade show",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],["type","text",1,"form-control",3,"ngModelChange","ngModel","disabled","title","ngClass"],["class","form-text text-muted",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"form-label","d-block"],[1,"form-select","form-control",3,"ngModelChange","ngModel","ngClass"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],["type","text","placeholder","Enter position",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["type","date",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"text-center","mt-4"],[1,"btn","btn-primary",3,"click"],[2,"display","inline-block","width","10px"],[1,"btn","btn-secondary",3,"click"],[1,"alert","alert-danger"],["type","button",1,"btn-close","float-end",3,"click"],[1,"alert","alert-success","alert-dismissible","fade","show"],["type","button",1,"btn-close",3,"click"],[1,"invalid-feedback"],[3,"value"],[4,"ngIf"]],template:function(o,t){o&1&&(n(0,"div",0)(1,"div",1)(2,"h4",2),l(3),r()(),n(4,"div",3),f(5,Ce,5,1,"div",4)(6,xe,3,1,"div",5),n(7,"div",6)(8,"label",7),l(9,"Employee ID "),n(10,"span",8),l(11,"*"),r()(),n(12,"input",9),I("ngModelChange",function(d){return S(t.employee.employeeId,d)||(t.employee.employeeId=d),d}),r(),f(13,we,2,0,"small",10)(14,Me,2,0,"div",11),r(),n(15,"div",6)(16,"label",12),l(17,"Account "),n(18,"span",8),l(19,"*"),r()(),n(20,"select",13),I("ngModelChange",function(d){return S(t.employee.userId,d)||(t.employee.userId=d),d}),n(21,"option",14),l(22,"-- Select Account --"),r(),f(23,Ae,3,4,"option",15),r(),n(24,"small",16),l(25," Only active and unassigned accounts are available for selection. "),r(),f(26,ke,2,0,"div",11),r(),n(27,"div",6)(28,"label",7),l(29,"Position "),n(30,"span",8),l(31,"*"),r()(),n(32,"input",17),I("ngModelChange",function(d){return S(t.employee.position,d)||(t.employee.position=d),d}),r(),f(33,Te,2,0,"div",11),r(),n(34,"div",6)(35,"label",12),l(36,"Department "),n(37,"span",8),l(38,"*"),r()(),n(39,"select",13),I("ngModelChange",function(d){return S(t.employee.departmentId,d)||(t.employee.departmentId=d),d}),n(40,"option",14),l(41,"-- Select Department --"),r(),f(42,Ne,2,2,"option",15),r(),f(43,Pe,2,0,"div",11),r(),n(44,"div",6)(45,"label",7),l(46,"Hire Date "),n(47,"span",8),l(48,"*"),r()(),n(49,"input",18),I("ngModelChange",function(d){return S(t.employee.hireDate,d)||(t.employee.hireDate=d),d}),r(),f(50,Ve,2,0,"div",11),r(),n(51,"div",6)(52,"label",12),l(53,"Status "),n(54,"span",8),l(55,"*"),r()(),n(56,"select",13),I("ngModelChange",function(d){return S(t.employee.status,d)||(t.employee.status=d),d}),n(57,"option",14),l(58,"-- Select Status --"),r(),n(59,"option"),l(60,"Active"),r(),n(61,"option"),l(62,"Inactive"),r()(),f(63,Fe,2,0,"div",11),r(),n(64,"div",19)(65,"button",20),h("click",function(){return t.save()}),l(66,"Save"),r(),C(67,"span",21),n(68,"button",22),h("click",function(){return t.cancel()}),l(69,"Cancel"),r()()()()),o&2&&(s(3),q("",t.id?"EDIT":"ADD"," EMPLOYEE"),s(2),m("ngIf",t.errorMessage),s(),m("ngIf",t.successMessage),s(6),E("ngModel",t.employee.employeeId),m("disabled",!!t.id||!t.isAdmin())("title",t.isAdmin()?"":"Only admins can change employee IDs")("ngClass",D(29,F,t.submitted&&!t.employee.employeeId)),s(),m("ngIf",!t.id),s(),m("ngIf",t.submitted&&!t.employee.employeeId),s(6),E("ngModel",t.employee.userId),m("ngClass",D(31,F,t.submitted&&!t.employee.userId)),s(),m("ngValue",null),s(2),m("ngForOf",t.availableUsers),s(3),m("ngIf",t.submitted&&!t.employee.userId),s(6),E("ngModel",t.employee.position),m("ngClass",D(33,F,t.submitted&&!t.employee.position)),s(),m("ngIf",t.submitted&&!t.employee.position),s(6),E("ngModel",t.employee.departmentId),m("ngClass",D(35,F,t.submitted&&!t.employee.departmentId)),s(),m("ngValue",null),s(2),m("ngForOf",t.departments),s(),m("ngIf",t.submitted&&!t.employee.departmentId),s(6),E("ngModel",t.employee.hireDate),m("ngClass",D(37,F,t.submitted&&!t.employee.hireDate)),s(),m("ngIf",t.submitted&&!t.employee.hireDate),s(6),E("ngModel",t.employee.status),m("ngClass",D(39,F,t.submitted&&!t.employee.status)),s(),m("ngValue",null),s(6),m("ngIf",t.submitted&&!t.employee.status))},dependencies:[$,k,T,Y,G,me,z,H,J],styles:[`.form-label[_ngcontent-%COMP%] {
        font-weight: 500;
        margin-bottom: 0.5rem;
        display: block;
    }
    
    .form-select[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%] {
        padding: 0.5rem;
        border-radius: 0.25rem;
        border: 1px solid #ced4da;
        background-color: #fff;
        height: 38px;
        width: 100%;
    }
    
    .form-select[_ngcontent-%COMP%] {
        appearance: auto;
        -webkit-appearance: auto;
    }
    
    .card-header[_ngcontent-%COMP%] {
        border-bottom: 1px solid rgba(0,0,0,.125);
    }
    
    .invalid-feedback[_ngcontent-%COMP%] {
        display: block;
        width: 100%;
        margin-top: 0.25rem;
        font-size: 80%;
        color: #dc3545;
    }
    
    .is-invalid[_ngcontent-%COMP%] {
        border-color: #dc3545;
    }
    
    .text-danger[_ngcontent-%COMP%] {
        color: #dc3545;
    }
    
    .btn-close[_ngcontent-%COMP%] {
        background: transparent;
        border: 0;
        font-size: 1.5rem;
        padding: 0.25rem;
        cursor: pointer;
        opacity: 0.5;
    }
    
    .btn-close[_ngcontent-%COMP%]:hover {
        opacity: 1;
    }
    
    .float-end[_ngcontent-%COMP%] {
        float: right;
    }`]})}}return i})();var Oe=(i,p)=>({"bg-success":i,"bg-danger":p});function Le(i,p){if(i&1){let e=b();n(0,"button",10),h("click",function(){y(e);let t=c();return _(t.add())}),l(1,"Add Employee"),r()}}function We(i,p){i&1&&(n(0,"div",11),C(1,"div",12),n(2,"p",13),l(3,"Loading data..."),r()())}function je(i,p){if(i&1){let e=b();n(0,"div",14)(1,"p"),l(2),r(),n(3,"button",10),h("click",function(){y(e);let t=c();return _(t.retry())}),l(4,"Retry"),r()()}if(i&2){let e=c();s(2),v(e.error)}}function Ue(i,p){if(i&1){let e=b();n(0,"button",17),h("click",function(){y(e);let t=c(2);return _(t.add())}),l(1,"Add Employee"),r()}}function Re(i,p){if(i&1&&(n(0,"div",15)(1,"p"),l(2,"No employees found. Please add an employee to get started."),r(),f(3,Ue,2,0,"button",16),r()),i&2){let e,o=c();s(3),m("ngIf",((e=o.account())==null?null:e.role)==="Admin")}}function qe(i,p){if(i&1){let e=b();n(0,"button",26),h("click",function(){y(e);let t=c().$implicit,a=c(2);return _(a.delete(t.id))}),l(1,"Delete"),r()}}function Be(i,p){if(i&1){let e=b();n(0,"tr")(1,"td"),l(2),r(),n(3,"td"),l(4),r(),n(5,"td"),l(6),r(),n(7,"td"),l(8),r(),n(9,"td"),l(10),oe(11,"date"),r(),n(12,"td")(13,"span",21),l(14),r()(),n(15,"td")(16,"div",22)(17,"button",23),h("click",function(){let t=y(e).$implicit,a=c(2);return _(a.viewRequests(t.id))}),l(18,"Requests"),r(),n(19,"button",23),h("click",function(){let t=y(e).$implicit,a=c(2);return _(a.viewWorkflows(t.id))}),l(20,"Workflows"),r(),n(21,"button",24),h("click",function(){let t=y(e).$implicit,a=c(2);return _(a.transfer(t))}),l(22,"Transfer"),r(),n(23,"button",10),h("click",function(){let t=y(e).$implicit,a=c(2);return _(a.edit(t.id))}),l(24,"Edit"),r(),f(25,qe,2,0,"button",25),r()()()}if(i&2){let e,o=p.$implicit,t=c(2);s(2),v(o.employeeId),s(2),v(t.getUserEmail(o.userId)),s(2),v(o.position),s(2),v(t.getDepartmentName(o.departmentId)),s(2),v(le(11,8,o.hireDate,"shortDate")),s(3),m("ngClass",re(11,Oe,o.status==="Active",o.status!=="Active")),s(),v(o.status),s(11),m("ngIf",((e=t.account())==null?null:e.role)==="Admin")}}function $e(i,p){if(i&1&&(n(0,"div",18)(1,"table",19)(2,"thead")(3,"tr")(4,"th"),l(5,"Employee ID"),r(),n(6,"th"),l(7,"User"),r(),n(8,"th"),l(9,"Position"),r(),n(10,"th"),l(11,"Department"),r(),n(12,"th"),l(13,"Hire Date"),r(),n(14,"th"),l(15,"Status"),r(),n(16,"th"),l(17,"Actions"),r()()(),n(18,"tbody"),f(19,Be,26,14,"tr",20),r()()()),i&2){let e=c();s(19),m("ngForOf",e.employees)}}var be=(()=>{class i{constructor(e,o,t,a,d){this.employeeService=e,this.accountService=o,this.departmentService=t,this.alertService=a,this.router=d,this.employees=[],this.users=[],this.departments=[],this.loading=!1,this.error=""}ngOnInit(){this.loading=!0,this.loadAllData()}loadAllData(){W({employees:this.employeeService.getAll().pipe(j(e=>(console.error("Error loading employees:",e),this.error="Failed to load employees. Please try again.",L([])))),users:this.accountService.getAll().pipe(j(e=>(console.error("Error loading users:",e),L([])))),departments:this.departmentService.getAll().pipe(j(e=>(console.error("Error loading departments:",e),L([]))))}).pipe(g()).subscribe({next:e=>{this.employees=e.employees||[],this.users=e.users||[],this.departments=e.departments||[],this.loading=!1,console.log("All data loaded successfully",{employees:this.employees.length,users:this.users.length,departments:this.departments.length}),this.employees.length>0&&(this.error="")},error:e=>{this.error="Failed to load data. Please try again.",this.alertService.error(this.error),this.loading=!1,console.error("Error in forkJoin:",e)}})}fetchEmployees(){this.loading=!0,this.employeeService.getAll().pipe(g()).subscribe({next:e=>{this.employees=e,this.loading=!1,this.error=""},error:e=>{this.error="Failed to load employees",this.alertService.error(this.error),this.loading=!1,console.error("Error fetching employees:",e)}})}retry(){this.error="",this.loadAllData()}account(){return this.accountService.accountValue}edit(e){this.router.navigate(["/admin/employees/edit",e])}add(){this.router.navigate(["/admin/employees/add"])}transfer(e){this.router.navigate(["/admin/employees/transfer",e.id])}delete(e){confirm("Are you sure you want to delete this employee?")&&this.employeeService.delete(e).pipe(g()).subscribe({next:()=>{this.alertService.success("Employee deleted"),this.fetchEmployees()},error:o=>{console.error("Error deleting employee:",o),this.alertService.error("Failed to delete employee")}})}getUserEmail(e){if(!e)return"No User Assigned";let o=e.toString(),t=this.users.find(a=>a.id&&a.id.toString()===o);return t?t.email:`Unknown User (ID: ${e})`}getDepartmentName(e){if(!e)return"No Department";let o=Number(e),t=this.departments.find(a=>Number(a.id)===o);return t?t.name:`Unknown Department (ID: ${e})`}viewWorkflows(e){this.router.navigate(["/admin/workflows"],{queryParams:{employeeId:e}})}viewRequests(e){this.router.navigate(["/admin/requests"],{queryParams:{employeeId:e}})}static{this.\u0275fac=function(o){return new(o||i)(u(x),u(Q),u(V),u(P),u(N))}}static{this.\u0275cmp=A({type:i,selectors:[["app-list"]],decls:11,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[1,"card-body"],["class","text-center my-3",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-info text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"text-center","my-3"],["role","status",1,"spinner-border","text-primary"],[1,"mt-2"],[1,"alert","alert-danger"],[1,"alert","alert-info","text-center"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"d-flex","flex-wrap",2,"gap","8px"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm","btn-warning",3,"click"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(o,t){if(o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),l(4,"Employees"),r(),f(5,Le,2,0,"button",4),r()(),n(6,"div",5),f(7,We,4,0,"div",6)(8,je,5,1,"div",7)(9,Re,4,1,"div",8)(10,$e,20,1,"div",9),r()()),o&2){let a;s(5),m("ngIf",((a=t.account())==null?null:a.role)==="Admin"),s(2),m("ngIf",t.loading),s(),m("ngIf",t.error),s(),m("ngIf",!t.loading&&!t.error&&(t.employees==null?null:t.employees.length)===0),s(),m("ngIf",!t.loading&&!t.error&&(t.employees==null?null:t.employees.length)>0)}},dependencies:[$,k,T,ae],encapsulation:2})}}return i})();function He(i,p){if(i&1&&(n(0,"div",15),l(1),r()),i&2){let e=c();s(),v(e.errorMessage)}}function Je(i,p){i&1&&(n(0,"div",16),l(1," You must select a different department than the current one. "),r())}function ze(i,p){if(i&1&&(n(0,"option",17),l(1),r()),i&2){let e=p.$implicit,o=c();m("value",e.id)("disabled",e.id===(o.employee==null?null:o.employee.departmentId)),s(),B(" ",e.name," ",e.id===(o.employee==null?null:o.employee.departmentId)?"(Current)":""," ")}}var Ee=(()=>{class i{constructor(e,o,t,a,d,w){this.router=e,this.route=o,this.employeeService=t,this.departmentService=a,this.workflowService=d,this.alertService=w,this.employee={},this.departments=[],this.currentDepartmentName=""}ngOnInit(){this.id=this.route.snapshot.params.id,W({employee:this.employeeService.getById(this.id),departments:this.departmentService.getAll()}).pipe(g()).subscribe({next:({employee:e,departments:o})=>{if(this.employee=e,this.departments=o,e&&e.departmentId){let t=o.find(a=>Number(a.id)===Number(e.departmentId));t?(this.currentDepartmentName=t.name,console.log(`Current department set to: ${this.currentDepartmentName} (ID: ${e.departmentId})`)):(console.error(`Department with ID ${e.departmentId} not found in the departments list:`,o),this.currentDepartmentName=`Unknown (ID: ${e.departmentId})`,this.departmentService.getById(e.departmentId.toString()).pipe(g()).subscribe({next:a=>{a&&(this.currentDepartmentName=a.name,console.log(`Retrieved department name: ${a.name}`))},error:a=>console.error("Error fetching department:",a)})),this.newDepartmentId=this.findDifferentDepartment(e.departmentId),console.log(`Current department ID: ${e.departmentId}, Selected new department ID: ${this.newDepartmentId}`)}else console.warn("Employee has no department ID assigned"),this.currentDepartmentName="No Department Assigned"},error:e=>{this.errorMessage="Could not load employee or department data",console.error("Error loading data:",e)}})}findDifferentDepartment(e){if(this.departments.length>0){let o=this.departments.find(t=>Number(t.id)!==Number(e));return o?o.id:null}return null}transfer(){if(!this.newDepartmentId){this.errorMessage="Please select a new department";return}let e=Number(this.employee.departmentId),o=Number(this.newDepartmentId);if(e===o){this.errorMessage="Cannot transfer to the same department. Please select a different department.";return}let t=this.currentDepartmentName,a=this.departments.find(d=>Number(d.id)===o)?.name||"New Department";this.errorMessage="",this.employeeService.update(this.id,te(ee({},this.employee),{departmentId:this.newDepartmentId})).pipe(g()).subscribe({next:d=>{console.log("Employee department updated successfully");let w={employeeId:parseInt(this.id),type:"Transfer",details:{from:t,to:a},status:"Pending"};this.workflowService.create(w).pipe(g()).subscribe({next:()=>{this.alertService.success("Employee transferred successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/admin/employees"])},error:M=>{console.error("Error creating workflow:",M),this.alertService.success("Employee transferred successfully but workflow creation failed",{keepAfterRouteChange:!0}),this.router.navigate(["/admin/employees"])}})},error:d=>{this.errorMessage="Could not transfer employee: "+(d.message||d),console.error("Error transferring employee:",d)}})}static{this.\u0275fac=function(o){return new(o||i)(u(N),u(K),u(x),u(V),u(fe),u(P))}}static{this.\u0275cmp=A({type:i,selectors:[["app-transfer"]],decls:25,vars:7,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["type","text","disabled","",1,"form-control",3,"value"],[1,"form-label","d-block"],[1,"form-select","w-100",3,"ngModelChange","ngModel"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"text-center","mt-4"],[1,"btn","btn-primary",3,"click","disabled"],[2,"display","inline-block","width","10px"],["routerLink","/admin/employees",1,"btn","btn-secondary"],[1,"alert","alert-danger"],[1,"alert","alert-warning"],[3,"value","disabled"]],template:function(o,t){o&1&&(n(0,"div",0)(1,"div",1),l(2,"Transfer Employee"),r(),n(3,"div",2),f(4,He,2,1,"div",3)(5,Je,2,0,"div",4),n(6,"div",5)(7,"label",6),l(8,"Employee"),r(),C(9,"input",7),r(),n(10,"div",5)(11,"label",6),l(12,"Current Department"),r(),C(13,"input",7),r(),n(14,"div",5)(15,"label",8),l(16,"New Department"),r(),n(17,"select",9),I("ngModelChange",function(d){return S(t.newDepartmentId,d)||(t.newDepartmentId=d),d}),f(18,ze,2,4,"option",10),r()(),n(19,"div",11)(20,"button",12),h("click",function(){return t.transfer()}),l(21,"Transfer"),r(),C(22,"span",13),n(23,"button",14),l(24,"Cancel"),r()()()()),o&2&&(s(4),m("ngIf",t.errorMessage),s(),m("ngIf",t.newDepartmentId===(t.employee==null?null:t.employee.departmentId)&&t.newDepartmentId!==null),s(4),m("value",t.employee==null?null:t.employee.employeeId),s(4),m("value",t.currentDepartmentName),s(4),E("ngModel",t.newDepartmentId),s(),m("ngForOf",t.departments),s(2),m("disabled",t.newDepartmentId===(t.employee==null?null:t.employee.departmentId)||!t.newDepartmentId))},dependencies:[k,T,Y,G,z,H,J,ce],styles:[`.form-label[_ngcontent-%COMP%] {
        font-weight: 500;
        margin-bottom: 0.5rem;
        display: block;
    }
    
    .form-select[_ngcontent-%COMP%] {
        padding: 0.5rem;
        border-radius: 0.25rem;
        border: 1px solid #ced4da;
        background-color: #fff;
        height: 38px;
        width: 100%;
        appearance: auto;
        -webkit-appearance: auto;
    }`]})}}return i})();var Ye=[{path:"",component:be},{path:"add",component:Z},{path:"edit/:id",component:Z},{path:"transfer/:id",component:Ee}],Se=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=R({type:i})}static{this.\u0275inj=U({imports:[O.forChild(Ye),O]})}}return i})();var St=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=R({type:i})}static{this.\u0275inj=U({providers:[x],imports:[de,pe,O,Se]})}}return i})();export{St as EmployeesModule};
